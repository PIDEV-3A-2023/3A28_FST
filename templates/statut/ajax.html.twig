

{% block javascript %}
<script>
const likeButton = document.querySelector('.like-button');
let isLiked = false;
let nbrLike = parseInt(document.querySelector('.nbr-like').textContent);

likeButton.addEventListener('click', function() {
  const statutId = likeButton.getAttribute('data-statut-id');
  
  if (isLiked) {
    // Appeler la méthode "dislikes" pour décrémenter le nombre de likes.
    fetch(`/statut/dislikes/${statutId}`)
      .then(response => {
        // Décrémenter le nombre de likes dans le DOM.
        nbrLike--;
        document.querySelector('.nbr-like').textContent = nbrLike;
        // Mettre à jour l'état du bouton "like".
        isLiked = false;
        likeButton.classList.remove('liked');
      });
  } else {
    // Appeler la méthode "likes" pour incrémenter le nombre de likes.
    fetch(`/statut/likes/${statutId}`)
      .then(response => {
        // Incrémenter le nombre de likes dans le DOM.
        nbrLike++;
        document.querySelector('.nbr-like').textContent = nbrLike;
        // Mettre à jour l'état du bouton "like".
        isLiked = true;
        likeButton.classList.add('liked');
      });
  }
});
</script>
{% endblock %}
